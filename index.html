<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Miwica i Nikowa slicice</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>

<div class="outer">
    <div class="group" data-title="Srecan rodjendan ljubavi">
        <div class="container">
            <div class="panel" id="tekst"><p>Zelim ti najsrecniji rodjendan ikad <br>U nastavku ces videti neke od nasih slika <br>Ovo je kao neki memory trip</p></div>
        </div>
    </div>
 
    <div class="group" data-title="Bechh️">
        <div class="container">
            <div class="panel"><img src="bec/1.jpg" alt="Bec 1"></div>
            <div class="panel"><img src="bec/2.jpg" alt="Bec 2"></div>
            <div class="panel"><img src="bec/3.jpg" alt="Bec 3"></div>
            <div class="panel"><img src="bec/4.jpg" alt="Bec 4"></div>
        </div>
    </div>
    
    <div class="group" data-title="Budimpeshtyy">
        <div class="container">
            <div class="panel"><img src="budimp/1.jpg" alt="Budimpesta 1"></div>
            <div class="panel"><img src="budimp/2.jpg" alt="Budimpesta 2"></div>
            <div class="panel"><img src="budimp/3.jpg" alt="Budimpesta 3"></div>
            <div class="panel"><img src="budimp/4.jpg" alt="Budimpesta 4"></div>
        </div>
    </div>

    <div class="group" data-title="Ovde smo sladki">
        <div class="container">
            <div class="panel"><img src="sladki/1.jpg" alt="Sladki 1"></div>
            <div class="panel"><img src="sladki/2.jpg" alt="Sladki 2"></div>
            <div class="panel"><img src="sladki/3.jpg" alt="Sladki 3"></div>
            <div class="panel"><img src="sladki/4.jpg" alt="Sladki 4"></div>
        </div>
    </div>
    
    <div class="group" data-title="JUMPSCARE!!">
        <div class="container">
            <div class="panel"><img src="jumpscare.jpg" alt="Jumpscare"></div>
        </div>
    </div>
    
    <div class="group" data-title="Vidi kako smo mladjani">
        <div class="container">
            <div class="panel"><img src="mladi/1.jpg" alt="Mladi 1"></div>
            <div class="panel"><img src="mladi/2.jpg" alt="Mladi 2"></div>
            <div class="panel"><img src="mladi/3.jpg" alt="Mladi 3"></div>
            <div class="panel"><img src="mladi/4.jpg" alt="Mladi 4"></div>
            <div class="panel"><img src="mladi/5.jpg" alt="Mladi 5"></div>
            <div class="panel"><img src="mladi/6.jpg" alt="Mladi 6"></div>
            <div class="panel"><img src="mladi/7.jpg" alt="Mladi 7"></div>
            <div class="panel"><img src="mladi/8.jpg" alt="Mladi 8"></div>
            <div class="panel"><img src="mladi/9.jpg" alt="Mladi 9"></div>
            <div class="panel"><img src="mladi/10.jpg" alt="Mladi 10"></div>
        </div>
    </div>
    <div class="group" data-title="Uuu ovde smo vredni">
        <div class="container">
            <div class="panel"><img src="vredni/1.jpg" alt="Vredni 1"></div>
            <div class="panel"><img src="vredni/2.jpg" alt="Vredni 2"></div>
            <div class="panel"><img src="vredni/3.jpg" alt="Vredni 3"></div>
            <div class="panel"><img src="vredni/4.jpg" alt="Vredni 4"></div>
            <div class="panel"><img src="vredni/5.jpg" alt="Vredni 5"></div>
            <div class="panel"><img src="vredni/6.jpg" alt="Vredni 6"></div>
            <div class="panel"><img src="vredni/7.jpg" alt="Vredni 7"></div>
            <div class="panel"><img src="vredni/8.jpg" alt="Vredni 8"></div>
            <div class="panel"><img src="vredni/9.jpg" alt="Vredni 9"></div>
            <div class="panel"><img src="vredni/10.jpg" alt="Vredni 10"></div>
        </div>
    </div>
</div>

<div class="group-title">Bechh</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<script>
gsap.registerPlugin(ScrollTrigger);

const groups = document.querySelectorAll(".group");
const titleEl = document.querySelector(".group-title");

// Sve slike su inicijalno sakrivene
gsap.set(".panel", {opacity: 0});

let currentVisiblePanel = null;

groups.forEach((group, groupIndex) => {
    const panels = group.querySelectorAll(".panel");
    const groupTitle = group.dataset.title;
    const groupHeight = panels.length * window.innerHeight;

    // Postavljamo visinu grupe da odgovara broju slika
    group.style.height = groupHeight + "px";

    panels.forEach((panel, i) => {
        ScrollTrigger.create({
            trigger: group,
            start: () => (i * window.innerHeight) + "px top",
            end: () => ((i + 1) * window.innerHeight) + "px top",
            scrub: false, // Uklanjamo scrub za bolju kontrolu
            onEnter: () => {
                // Sakrij sve ostale panele
                if (currentVisiblePanel && currentVisiblePanel !== panel) {
                    gsap.to(currentVisiblePanel, {opacity: 0, duration: 0.3});
                }
                gsap.to(panel, {opacity: 1, duration: 0.3});
                currentVisiblePanel = panel;
            },
            onLeaveBack: () => {
                // Sakrij trenutni panel
                gsap.to(panel, {opacity: 0, duration: 0.3});
                // Prikaži prethodni panel ako postoji
                if (i > 0) {
                    gsap.to(panels[i-1], {opacity: 1, duration: 0.3});
                    currentVisiblePanel = panels[i-1];
                } else {
                    currentVisiblePanel = null;
                }
            }
        });
    });

    // Menjanje naslova kada grupa uđe/izađe
    ScrollTrigger.create({
        trigger: group,
        start: "top center",
        end: "bottom center",
        onEnter: () => {
            titleEl.textContent = groupTitle;
            // Sakrij sve panele osim prvog u grupi
            panels.forEach((p, idx) => {
                if (idx === 0) {
                    gsap.to(p, {opacity: 1, duration: 0.3});
                    currentVisiblePanel = p;
                } else {
                    gsap.to(p, {opacity: 0, duration: 0.3});
                }
            });
        },
        onEnterBack: () => {
            titleEl.textContent = groupTitle;
            // Prikaži poslednji panel u grupi pri povratku
            const lastPanel = panels[panels.length - 1];
            panels.forEach(p => {
                if (p === lastPanel) {
                    gsap.to(p, {opacity: 1, duration: 0.3});
                    currentVisiblePanel = p;
                } else {
                    gsap.to(p, {opacity: 0, duration: 0.3});
                }
            });
        },
        onLeave: () => {
            // Sakrij sve panele kad grupa izađe
            gsap.to(panels, {opacity: 0, duration: 0.3});
            currentVisiblePanel = null;
        },
        onLeaveBack: () => {
            // Sakrij sve panele kad grupa izađe unazad
            gsap.to(panels, {opacity: 0, duration: 0.3});
            currentVisiblePanel = null;
        }
    });
});
</script>



</body>
</html>
